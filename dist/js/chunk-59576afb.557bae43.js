(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59576afb"],{"0d7d":function(e,t,l){},"169f":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("span",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),l("el-row",{staticClass:"table-toolbar"},[l("el-col",{attrs:{span:15}},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.doAdd("add")}}},[e._v("添加问题")]),e._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.copyModule}},[e._v("复制问题")]),e._v(" "),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.deleteAll}},[e._v("删除")])],1),e._v(" "),l("el-col",{staticClass:"searchStyle",attrs:{span:5}},[l("span",[e._v("问题内容:")]),e._v(" "),l("el-input",{attrs:{size:"small","prefix-icon":"el-icon-search",placeholder:"问题内容",clearable:""},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),l("el-col",{attrs:{span:3}},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSearch}},[e._v("搜索")])],1)],1),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",size:"small",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-table",{directives:[{name:"show",rawName:"v-show",value:t.row.child,expression:"props.row.child"}],attrs:{size:"small",data:t.row.child,"header-row-class-name":"headStyle","header-cell-style":{background:"#eef1f6",color:"#606266"},align:"center",stripe:"",border:"true"}},[l("el-table-column",{attrs:{label:"问题序号",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("问题"+e._s(t.row.index))]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{label:"是否虚拟问题",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ifVR?l("span",[e._v("是")]):l("span",[e._v("否")])]}}],null,!0)}),e._v(" "),l("el-table-column",{attrs:{prop:"question",label:"问题内容"}}),e._v(" "),l("el-table-column",{attrs:{prop:"answer",label:"回复情况",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.handleChildClick(t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.handleDeleteClick(t.row)}}},[e._v("删除")])]}}],null,!0)})],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{label:"问题序号",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("问题"+e._s(t.row.index))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"是否虚拟问题",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ifVR?l("span",[e._v("是")]):l("span",[e._v("否")])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"question",label:"问题内容"}}),e._v(" "),l("el-table-column",{attrs:{prop:"answer",label:"回复情况",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"排序",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("i",{staticClass:"el-icon-arrow-up iSize",on:{click:function(l){return e.handleSortClick(t.row,"up")}}}),e._v(" "),l("i",{staticClass:"el-icon-arrow-down iSize",on:{click:function(l){return e.handleSortClick(t.row,"down")}}})]}}])}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.handleClick(t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.addChild(t.row)}}},[e._v("新增子问题")])]}}])})],1),e._v(" "),l("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next,jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}),e._v(" "),l("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{attrs:{model:e.form}},[l("el-form-item",{attrs:{label:"问题内容","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.question,callback:function(t){e.$set(e.form,"question",t)},expression:"form.question"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"虚拟问题","label-width":e.formLabelWidth}},[l("el-switch",{model:{value:e.form.ifVR,callback:function(t){e.$set(e.form,"ifVR",t)},expression:"form.ifVR"}})],1),e._v(" "),e._l(e.answers,(function(t){return l("el-form-item",{key:t,attrs:{label:"回复情况"+t,"label-width":e.formLabelWidth}},[l("el-form",{attrs:{model:e.form.answer[t-1]}},[l("el-form-item",{attrs:{label:""}},[l("el-checkbox-group",{model:{value:e.form.answer[t-1].type,callback:function(l){e.$set(e.form.answer[t-1],"type",l)},expression:"form.answer[item-1].type"}},[l("el-checkbox",{attrs:{label:"调用模型",name:"type"}},[e._v("\n                调用模型\n                "),l("el-select",{staticClass:"qSelect",attrs:{placeholder:"请选择",autocomplete:"off"},model:{value:e.form.answer[t-1].content.module1,callback:function(l){e.$set(e.form.answer[t-1].content,"module1",l)},expression:"form.answer[item-1].content.module1"}},e._l(e.answewrModule1,(function(e){return l("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1),e._v(" "),l("el-select",{attrs:{placeholder:"请选择",autocomplete:"off"},model:{value:e.form.answer[t-1].content.module2,callback:function(l){e.$set(e.form.answer[t-1].content,"module2",l)},expression:"form.answer[item-1].content.module2"}},e._l(e.answewrModule2,(function(e){return l("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1),e._v(" "),l("el-checkbox",{attrs:{label:"正则",name:"type"}},[e._v("\n                正则\n                "),l("el-input",{attrs:{type:"textarea"},model:{value:e.form.answer[t-1].content.rules,callback:function(l){e.$set(e.form.answer[t-1].content,"rules",l)},expression:"form.answer[item-1].content.rules"}})],1),e._v(" "),l("el-checkbox",{attrs:{label:"取反",name:"type"}},[e._v("取反")])],1)],1)],1)],1)})),e._v(" "),l("el-form-item",{attrs:{label:"流转方式","label-width":e.formLabelWidth}},[l("el-form",{attrs:{model:e.form.way}},[l("el-form-item",{attrs:{label:""}},[l("el-radio-group",{model:{value:e.form.way.resource,callback:function(t){e.$set(e.form.way,"resource",t)},expression:"form.way.resource"}},[l("el-radio",{attrs:{label:"radio1"}},[e._v("默认流程")])],1),e._v(" "),l("el-radio-group",{model:{value:e.form.way.resource,callback:function(t){e.$set(e.form.way,"resource",t)},expression:"form.way.resource"}},[l("el-radio",{attrs:{label:"radio2"}},[e._v("跳转到问题"),l("el-input",{attrs:{size:"mini"},model:{value:e.form.way.jump,callback:function(t){e.$set(e.form.way,"jump",t)},expression:"form.way.jump"}})],1)],1),e._v(" "),l("el-radio-group",{model:{value:e.form.way.resource,callback:function(t){e.$set(e.form.way,"resource",t)},expression:"form.way.resource"}},[l("el-radio",{attrs:{label:"radio3"}},[e._v("重复问题,同样情况"),l("el-input",{attrs:{size:"mini"},model:{value:e.form.way.num,callback:function(t){e.$set(e.form.way,"num",t)},expression:"form.way.num"}}),e._v("遍后,\n                "),l("el-select",{attrs:{placeholder:"请选择",autocomplete:"off",size:"mini"},model:{value:e.form.way.jumpType,callback:function(t){e.$set(e.form.way,"jumpType",t)},expression:"form.way.jumpType"}},e._l(e.jumpTypes,(function(e){return l("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1),e._v(" "),l("el-radio-group",{model:{value:e.form.way.resource,callback:function(t){e.$set(e.form.way,"resource",t)},expression:"form.way.resource"}},[l("el-radio",{attrs:{label:"radio4"}},[e._v("跳转到人工干预，干预后跳转到问题"),l("el-input",{attrs:{size:"mini"},model:{value:e.form.way.jumpNum,callback:function(t){e.$set(e.form.way,"jumpNum",t)},expression:"form.way.jumpNum"}})],1)],1)],1)],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[l("el-button",{attrs:{type:"primary"},on:{click:e.addAnswer}},[e._v("添加回复情况")])],1)],2),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.doSure}},[e._v("确 定")])],1)],1)],1)},n=[],i=(l("ac6a"),l("75fc")),o=l("b775");function s(e){return Object(o["a"])({url:"/table/list",method:"get",params:e})}var r={filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){return{title:"",type:"add",list:null,listLoading:!0,searchValue:"",trialName:"",traidType:[],tableIndex:null,tableData:[{ifVR:!0,question:"二次酒驾、无证驾驶、伪造车牌号码",answer:"共3种回复情况",index:1,child:[{ifVR:!0,question:"二次酒驾、无证驾驶、伪造车牌号码",answer:"共3种回复情况",index:1},{ifVR:!0,question:"醉酒驾驶",answer:"共2种回复情况",index:2}]},{ifVR:!0,question:"醉酒驾驶",answer:"共2种回复情况",index:2},{ifVR:!1,question:"盗窃(行政)",answer:"共3种回复情况",index:3},{ifVR:!0,question:"盗窃(刑事)",answer:"共3种回复情况",index:4},{ifVR:!1,question:"赌博(行政)",answer:"共3种回复情况",index:5}],options:[{value:"二次酒驾"},{value:"醉酒驾驶"},{value:"无证驾驶"},{value:"伪造车牌号码"},{value:"盗窃(行政)"},{value:"盗窃(刑事)"},{value:"赌博(行政)"}],multipleSelection:[],childSelection:[],currentPage:1,total:30,dialogFormVisible:!1,form:{question:"",ifVR:null,answer:[{type:[],content:{module1:"",module2:"",rules:""}},{type:[],content:{module1:"",module2:"",rules:""}}],way:{resource:"",jump:null,num:null,jumpType:"",jumpNum:null}},jumpTypes:[{value:"跳到下一个问题"},{value:"跳到人工干预"}],answewrModule1:[{value:"通用是非判断"},{value:"嫌疑人姓名抽取"}],answewrModule2:[{value:"否定回答"},{value:"肯定回答"}],answers:[1],formLabelWidth:"100px",timer:null,lastTime:null,addType:"father"}},created:function(){this.fetchData()},mounted:function(){this.getDay(),this.title=this.$route.params.traidName},methods:{handleClick:function(e){this.title="编辑问题".concat(e.index),this.type="updata",this.addType="father",this.dialogFormVisible=!0,this.form.ifVR=e.ifVR,this.form.question=e.question,this.tableIndex=e.index-1},handleChildClick:function(e){this.title="编辑问题".concat(this.tableIndex+1,"的子问题").concat(e.index),this.type="updata",this.addType="child",this.dialogFormVisible=!0,this.form.ifVR=e.ifVR,this.form.question=e.question},handleDeleteClick:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSortClick:function(e,t){var l=this,a=+new Date;this.lastTime&&this.lastTime-a<200&&clearTimeout(this.timer),this.timer="up"===t?setTimeout((function(){l.sortUp(e),l.lastTime=+new Date}),200):setTimeout((function(){l.sortDown(e),l.lastTime=+new Date}),200)},sortUp:function(e){var t;e.index>1&&((t=this.tableData).splice.apply(t,[e.index-1,1].concat(Object(i["a"])(this.tableData.splice(e.index-2,1,this.tableData[e.index-1])))),this.tableData.forEach((function(e,t){e.index=t+1})))},sortDown:function(e){var t;e.index<this.tableData.length&&((t=this.tableData).splice.apply(t,[e.index,1].concat(Object(i["a"])(this.tableData.splice(e.index-1,1,this.tableData[e.index])))),this.tableData.forEach((function(e,t){e.index=t+1})))},fetchData:function(){var e=this;this.listLoading=!0,s().then((function(t){e.list=t.data.items,e.listLoading=!1}))},handleSelectionChange:function(e){this.multipleSelection=e},onSearch:function(){},doAdd:function(){this.title="新增问题",this.dialogFormVisible=!0,this.answers=[1],this.form.answer.splice(1),Object.assign(this.form,{}),this.traidType=[],this.type="add",this.addType="father"},deleteAll:function(){var e=this;0===this.multipleSelection.length?this.$message("请选择要删除的信息"):(this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({type:"success",message:"删除成功!"}),e.multipleSelection.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)})),e.multipleSelection=[]})).catch((function(){e.$message({type:"info",message:"已取消删除"})})),console.log(this.multipleSelection))},copyModule:function(){var e=this;0===this.multipleSelection.length?this.$message("请选择要复制的模板"):this.multipleSelection.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t);var l={};Object.assign(l,t),l.index=e.tableData.length+1,l.date=e.getDay(),e.tableData.push(l)}))},handleCurrentChange:function(e){this.currentPage=e},addChild:function(e){this.dialogFormVisible=!0,this.tableIndex=e.index-1,this.title="问题".concat(e.index," 新增子问题"),this.addType="child"},addAnswer:function(){var e={type:[],content:{module1:"",module2:"",rules:""}};this.form.answer.push(e),this.answers.push(this.answers.length+1)},doSure:function(){if("add"===this.type){var e={};e.ifVR=this.form.ifVR,e.question=this.form.question,"child"===this.addType?(this.tableData[this.tableIndex].child?this.tableData[this.tableIndex].child.push(e):(this.tableData[this.tableIndex].child=[],this.tableData[this.tableIndex].child.push(e)),console.log(this.tableData[this.tableIndex])):this.tableData.push(e)}this.answers=[1],this.form.answer.splice(1),this.dialogFormVisible=!1},getDay:function(){var e=new Date,t=e.getFullYear(),l=e.getMonth()+1,a=e.getDate(),n=e.getHours(),i=e.getMinutes(),o=e.getSeconds();return l<10&&(l="0"+l),a<10&&(a="0"+a),n<10&&(n="0"+n),i<10&&(i="0"+i),o<10&&(o="0"+o),"".concat(t,"-").concat(l,"-").concat(a," ").concat(n,":").concat(i,":").concat(o)}}},c=r,u=(l("bc84"),l("2877")),d=Object(u["a"])(c,a,n,!1,null,"04420d66",null);t["default"]=d.exports},bc84:function(e,t,l){"use strict";var a=l("0d7d"),n=l.n(a);n.a}}]);
//# sourceMappingURL=chunk-59576afb.557bae43.js.map